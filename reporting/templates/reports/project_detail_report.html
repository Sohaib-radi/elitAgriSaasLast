{% extends "shared/base_report.html" %}
{% load i18n %}
{% block content %}
<h1 style="padding-top: 20px; "> Detail Project: <span style="font-weight: bold; color: #667eea;">{{ project.name }}</span></h1>

<section class="section">
  <div class="section">
    <h2>{% trans "Overview" %}</h2>
    <table class="table-data">
      <tr>
        <th>{% trans "Project Code" %}</th>
        <td>{{ project.project_code }}</td>
      </tr>
      <tr>
        <th>{% trans "Project Number" %}</th>
        <td>{{ project.project_number }}</td>
      </tr>
      <tr>
        <th>{% trans "Parent Project" %}</th>
        <td>{{ project.parent_project.name|default:"â€”" }}</td>
      </tr>
      <tr>
        <th>{% trans "Start Date" %}</th>
        <td>{{ project.start_date|date:"Y-m-d" }}</td>
      </tr>
      <tr>
        <th>{% trans "End Date" %}</th>
        <td>{{ project.end_date|date:"Y-m-d" }}</td>
      </tr>
      <tr>
        <th>{% trans "Is Active" %}</th>
        <td>{{ project.is_active|yesno:_("Yes,No") }}</td>
      </tr>
      <tr>
        <th>{% trans "Address" %}</th>
        <td>{{ project.address }}</td>
      </tr>
      <tr>
        <th>{% trans "Description" %}</th>
        <td>{{ project.description|safe }}</td>
      </tr>
    </table>
  </div>
</section>
<section class="section">
  <h2>Summary Overview</h2>
  <div class="summary-cards" id="summaryCards">
    <div class="summary-card">
      <h4>{% trans "Total Assets" %}</h4>
      <p>{{ summary.total_assets }}</p>
    </div>
    <div class="summary-card">
      <h4>{% trans "Total Asset Value" %}</h4>
      <p>{{ summary.total_asset_value }}</p>
    </div>
    <div class="summary-card">
      <h4>{% trans "Total Costs" %}</h4>
      <p>{{ summary.total_costs }}</p>
    </div>

  </div>
</section>
<!-- {% if cost_chart %}
  <div class="section chart">
    <h3>{% trans "Cost Breakdown" %}</h3>
    <img src="data:image/png;base64,{{ cost_chart }}" alt="Cost Chart">
  </div>
  {% endif %} -->
<div class="section">
  <h2>{% trans "Assets Used in Project" %}</h2>
  <table class="table-data">
    <thead>
      <tr>
        <th>{% trans "Name" %}</th>
        <th>{% trans "Type" %}</th>
        <th>{% trans "Purchase Date" %}</th>
        <th>{% trans "Price" %}</th>
        <th>{% trans "Lifespan (days)" %}</th>
        <th>{% trans "Supplier" %}</th>
        <th>{% trans "Description" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for asset in asset_data %}
      <tr>
        <td>{{ asset.name }}</td>
        <td>{{ asset.type }}</td>
        <td>{{ asset.purchase_date }}</td>
        <td>{{ asset.price }}</td>
        <td>{{ asset.lifespan }}</td>
        <td>{{ asset.supplier }}</td>
        <td>{{ asset.description }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7" style="text-align: center;">{% trans "No assets linked to this project." %}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="section">
  <h2>{% trans "Project Costs" %}</h2>
  <table class="table-data">
    <thead>
      <tr>
        <th>{% trans "Name" %}</th>
        <th>{% trans "Type" %}</th>
        <th>{% trans "Amount" %}</th>
        <th>{% trans "Linked Asset" %}</th>
        <th>{% trans "Description" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for cost in cost_data %}
      <tr>
        <td>{{ cost.name }}</td>
        <td>{{ cost.type }}</td>
        <td>{{ cost.amount }}</td>
        <td>{{ cost.asset }}</td>
        <td>{{ cost.description }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" style="text-align: center;">{% trans "No cost entries found." %}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}